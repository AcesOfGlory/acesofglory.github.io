---
layout: page
published: true
---

<h1>Fortune Cookie Clicker</h1>
<small>Version 1.0.5</small>

<div id="buildings-shop" class="button-column">Buildings: <p></div>

<div>
	<input type="image" onclick="clickCookie();" id="cookie-image" class="button-style" src="http://www.clipartkid.com/images/365/fortune-cookie-clip-art-at-clker-com-vector-clip-art-online-royalty-4Qy7Am-clipart.png" />
</div>

<p id="cookie-amount">Cookies = 0</p>
<p id="cps-amount">CPS = 0</p>


<script type="text/javascript">
	document.getElementById('cookie-image').ondragstart = function() { return false; };
	var cookies;
	var cps = 0;
	var hasBought = false;
	var currentCookie;
	
	setInterval(autosave, 30000);

	function createCookie(cookies) {
		document.cookie = "cookies="+cookies+";";
	}

	function readCookie(){
		var cookieFind = parseInt(document.cookie.match(/cookies=(\d+)/)[1]);
		currentCookie = cookieFind;
		cookies= cookieFind;
	}

	try{
		readCookie();
	}
	catch(error){
		cookies = 0;
		createCookie(cookies);
	}
	document.getElementById("cookie-amount").innerHTML = `Cookies = ${Math.floor(cookies)}`;

	class Building {

		constructor(name, cost, increment=0, time=1) {
			this.group = "Building";
			this.amount = 0;
			this.name = name;
			this.cost = cost;
			this.increment = increment;
			this.time = time;
		}

	}

	const buildings = [
		new Building("Cursor", 10, 0.25),
		new Building("Grandma", 100, 1),
		new Building("Farm", 500, 8),
		new Building("Mine", 10000, 20),
		new Building("Factory", 50000, 100),
		new Building("Bank", 100000, 250),
		new Building("Temple", 250000, 1000),
		new Building("Wizard tower", 500000, 2500),
		new Building("Shipment", 1000000, 7500),
		new Building("Alchemy lab", 5000000, 50000),
		new Building("Portal", 10000000, 150000)
		new Building("End game", 100000000000)
	];


	buildings.forEach(item => {
		var para = document.createElement("BR");
		var card = document.createElement("input"); 
		card.type = "button";
		card.onclick = _ => buy(item);
		card.id = item.name
		card.value = `${item.name}: ${item.amount} (costs ${item.cost})`; 
		document.getElementById("buildings-shop").appendChild(card);
    document.getElementById("buildings-shop").appendChild(para);
	}); 


	function clickCookie(){
		cookies++;
		document.getElementById("cookie-amount").innerHTML = `Cookies = ${Math.floor(cookies)}`;
		document.getElementById("cps-amount").innerHTML = `CPS = ${cps}`;
	}

	function buy(item){
		if (!hasBought){
			hasBought = true;
			loop();
		}
		if (cookies >= item.cost){
			if (item.name === "End game"){
				alert("Congratulations!");
			}
			
			item.amount++;
			cookies -= item.cost;

			if (item.group == "Building"){
				item.cost = Math.floor(item.cost * 1.3);

				cps += item.increment/item.time;

				document.getElementById("cps-amount").innerHTML = `CPS = ${cps}`;
				document.getElementById("cookie-amount").innerHTML = `Cookies = ${Math.floor(cookies)}`;
				
				document.getElementById(item.name).value = `${item.name}: ${item.amount} (costs ${item.cost})`;
			}      
		}              
	}
	
	function loop(){
		cookies += (cps / 100);
		document.getElementById("cookie-amount").innerHTML = `Cookies = ${Math.floor(cookies)}`;
		setTimeout(loop, 10);		
	}
	
	function autosave(){
		if (cookies > currentCookie){
			createCookie(cookies);
		}
		
	}


</script>




<style type="text/css">

	.button-style{
		height: 250px;
		width: 250px;
		outline: 0;
        	float: left;
	}
	
	.button-column{
        	float: right;
	}

</style>
